<link rel="import" href="../../components/ab-widget/ab-widget.html">
<polymer-element name="widget-text" attributes="options">
  <template>
    <style>

      :host #textContainer {
        overflow-y: auto;
      }

      :host .edit textarea {
        display: block;
        width: 100%;
        height: 100%;
      }

    </style>
    <ab-widget name="Text">
      <div class="edit">
        <textarea rows="10" value="{{text}}">
        </textarea>
      </div>
      <div id="text" class="view"></div>
    </ab-widget>
  </template>
  <script type="text/javascript" src="vendor/marked.min.js"></script>
  <script>
    Polymer('widget-text', {

      text: '',

      textChanged: function() {
        this.$.text.innerHTML = marked(this.text);
      },

      optionsChanged: function(oldOpts, newOpts) {
        if(newOpts && 'text' in newOpts) {
          this.text = newOpts.text;
        }
      },

      exports: function() {
        return {
          text: this.text
        };
      }

    });
  </script>
</polymer-element>